# BasicRobotics_Introduction
1학년 1학기 기초로봇공학개론

###실행단계
1 부저, LED, LED+쉬프트 레지스터를 출력 상태로 핀모드를 설정한다.
2. 스위치 버튼을 입력 상태로 핀모드를 설정한다.
3. LCD, 적외선 수신기/리모컨을 초기 상태로 만든다.
4 초기 물 온도로 ‘Water’출력 및 초기 RGB LED 빛 색 설정

###반복단계
<필터 수명 표시>
1. LCD 화면 중앙에 필터 수명을 띄운다.
   
<스위치 감지>
3. 스위치 버튼을 눌렀을 때 물의 온도가 온수/냉수/정수로 바뀌도록 한다. 온수/냉수/정수일 때 3색 LED의 색, LCD 메뉴 모두 바뀐다.

<리모컨 감지>
4. 리모컨 1, 2, 3 버튼을 눌렀을 때 물의 온도가 온수/냉수/정수로 바뀌도록 한다. 물의 온도가 온수일 때 리모컨의 +, - 버튼을 누르면 온수의 온도 조절이 가능하다. 이외에는 스위치 버튼을 눌렀을 때와 같다.

<조도 센서 감지>
5. 만약에 조도 센서 근처로 컵을 가까이 가져가면, 부저가 1초 동안 울린 뒤 정수기의 밸브 부분에 있는 모터가 작동한다. 물을 따르고 있을 때는 쉬프트 레지스터와 결합한 8개의 LED가 주기적으로 깜빡인다.
6. 컵을 정수기에서 떼거나, 정수기 내부의 수분수위센서가 물이 부족함(수분수위센서값 300 이하)을 감지하면 모터가 원래 상태로 돌아와 밸브가 잠긴다. 이때 필터 수명이 한 단계 감소한다. 모터의 움직임은 적외선 리모컨 관련 장치를 교란하므로, 적외선 리모컨을 이때 한번 초기화시킨다.

<필터 수명에 따른 표시>
7. 필터 수명이 10단계 중에서 5단계에 미친다면 LCD에 필터를 바꾸라는 뜻인 “Change”가 표시된다.
8. 필터 수명이 0일 때는 LCD에 “Danger”가 표시된다.
9. 필터 수명이 0 이하일 때, (사람이 필터를 바꾸는 동작을 생략하고) 필터의 수명이 10단계로 초기화된다.


##시행착오
이러한 정수기 기능을 구현하면서 많은 시행착오가 있었다.
 첫 번째로는 라이브러리 문제이다. 이번 결과물을 제작하기 위해서는 리모컨을 동작시키기 위한 IRremote 라이브러리, LCD를 위한 LiquidCrystal_I2C 라이브러리를 추가로 설치해주어야 한다. 리모컨 라이브러리를 설치함에 있어 구버전인 3.5버전이 아닌 최신버전을 설치해서 호환성 문제로 인해 작동을 하지 않았었다. 
 다음으로는 브레드보드 상의 문제가 있었다. 보통 사용하는 브레드보드의 –로 표시된 파란선과 +로 표시된 빨간선은 일직선의 연결되어 있다. 하지만 이번에 제공받은 브레드보드는 일직선이 아닌 2등분 되어 끊어져 있는 브레드보드였다. 그래서 사용한 소자들을 +와 – 선에 연결하여 한 번에 아두이노의 5V핀과 GND핀에 연결하려 했지만 끊어져 있음을 인지하지 못하여 작동하지 않는 점에 대해 많은 시간 토론을 했었다. 다행히 2등분 된 부분 중 5V와 연결된 구역의 소자들만 작동하고 있다는 점을 인지하였고 각 부분들을 케이블을 통해 연결해주어 해결하였다.
 코드를 실행하고 난 후 리모컨으로 입력을 주면 잘 작동하였지만, 조도센서를 통해 모터를 작동시키고 리모컨으로 다시 입력을 주면 작동하지 않는 문제도 있었다. 코드 상의 충돌이 있을 것이라 판단하여 해당 부분에 대해 함께 생각해보았고 모터를 작동하고 난 후의 코드에 irrecv.enableIRIn();를 추가하여 리모컨이 다시 입력을 받을 수 있도록 설정해주어 문제를 해결하였다.

 ##결론
  정수기를 사용하면서 느낀 불편함을 해소하기 위해 스마트 정수기를 긴 시간 동안 구상하고, 아두이노를 연결하고, 소프트웨어를 디자인하였다. 우리 조원의 힘으로 정수기를 만들면서 쉽지 않은 과정을 겪었고, 정수기가 시장에 나오기까지 하드웨어, 소프트웨어 설계가 한 번에 이루어지는게 아니라 수많은 시도 끝에 탄생했음을 알 수 있었다.
 정수기를 만드는 중 교수님의 조언, 조원들의 아이디어를 많이 참고하였다. 수분 수위 센서를 통한 남은 물의 양 감지, 안전을 위한 온수의 온도 조절 등 여러 유용한 기능을 정수기에 추가하였다. 이 기능을 위해 소프트웨어의 도움을 받았다. 많은 기능을 로봇에 추가하면서도 자원을 최소한으로 사용하기 위해서는 소프트웨어의 역할이 중요함을 알게 되었다.
 하지만 각 코드의 동시동작 부분이 매끄럽지 못한 부분이 아쉬웠다. 결과적으로 원하는 동작을 수행하는 것에 문제는 없었지만 각 코드동작 이후 딜레이가 어느정도 발생하는 것에 대해서는 다소 아쉬운 점이 있었다. 정수기를 더 개선할 수 있다면, 정수기의 동작 시작 과정을 자동화 하거나, 음성 인식 센서 또는 안내 음성을 추가, 혹은 정수기 소프트웨어 동작 속도를 최적화 하는 등의 개선을 하고싶다. 또한, 아두이노의 PWM 서보 모터에 기계기구부를 설치하는 등 조금 더 응용이 가해진다면 실제로 유용하게 쓸 수 있을 것이다.
